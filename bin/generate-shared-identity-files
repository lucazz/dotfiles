#!/bin/bash

key_folders=$(ls ${HOME}/.ssh/keys/)

for folder in ${key_folders}; do
	files=$(ls ${HOME}/.ssh/keys/${folder})
	for file in ${files}; do
		if [[ "{$file}" != *".pub" ]]; then
			file_array+=($(ls `realpath ${HOME}/.ssh/keys/${folder}/${file}`))
		fi
	done
done

filtered_array=${file_array[@]/*.pub/}


for value in $(printf '%s\n' $filtered_array);do
	echo  "IdentityFile ${value}" >> ${HOME}/.dotfiles/ssh/config.d/shared
done
