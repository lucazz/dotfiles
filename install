#!/bin/bash
BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# create secrets file
touch ${BASEDIR}/.secrets

# gitconfig
ln -s ${BASEDIR}/git/gitconfig ~/.gitconfig
ln -s ${BASEDIR}/git/gitignore ~/.gitignore
ln -s ${BASEDIR}/git/gitmessage ~/.gitmessage

# gnupg
mkdir ~/.gnupg
ln -s ${BASEDIR}/gnupg/gpg.conf ~/.gnupg/gpg.conf

# homebrew
bash ${BASEDIR}/homebrew/install.sh

# PIP
bash ${BASEDIR}/pip/install.sh
ln -s ${BASEDIR}/pip/pydistutils.cfg ~/.pydistutils.cfg

# Set osx defaults
bash ${BASEDIR}/osx-defaults/set-defaults.sh

# Configuring ssh
ln -s ${BASEDIR}/ssh/config \
	~/.ssh/config

# Install alacrity
bash ${BASEDIR}/rust/install.sh
cd alacritty/ \
	&& make app \
	&& cd ..
cp -r alacritty/target/release/osx/Alacritty.app /Applications/
ln -s ${BASEDIR}/alacritty-config/config.yml \
	~/.config/alacritty/alacritty.yml

# Setup icloud
ln -s ~/Library/Mobile\ Documents/com~apple~CloudDocs/Projects ~/Projects

# Tmux
ln -s ${BASEDIR}/tmux/tmux.conf ~/.tmux.conf

# Installing NERDFonts
ln -s ${BASEDIR}/fonts/Fura\ Code\ Retina\ Nerd\ Font\ Complete\ Mono.ttf \
	~/Library/Fonts/Fura\ Code\ Retina\ Nerd\ Font\ Complete\ Mono.ttf
ln -s ${BASEDIR}/fonts/Monaco\ for\ Powerline\ Nerd\ Font\ Complete.otf \
	~/Library/Fonts/Sauce\ Code\ Pro\ Nerd\ Font\ Complete.ttf
ln -s ${BASEDIR}/fonts/Ubuntu\ Mono\ Nerd\ Font\ Complete.ttf \
	~/Library/Fonts/Ubuntu\ Mono\ Nerd\ Font\ Complete.ttf

# Import gpg keys from keybase
bash ${BASEDIR}/keybase/import_keys.sh

mv /usr/local/bin/kubens /usr/local/bin/knamespace
mv /usr/local/bin/kubectx /usr/local/bin/kcontext

# Installing bash_profile
ln -s ${BASEDIR}/bash/bash_profile ~/.bash_profile

# vimfiles
mkdir -p ~/.config
ln -s ${BASEDIR}/vim/vimrc ~/.vimrc
ln -s ${BASEDIR}/vim/ ~/.vim
ln -s ${BASEDIR}/vim/ ~/.config/nvim
vim +PlugInstall +qa!
